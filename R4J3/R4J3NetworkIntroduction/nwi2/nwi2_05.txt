トランスポート層はネットワークとアプリケーションの架け橋となる階層のこと。ネットワーク層のプロトコルによってサーバーに運ばれたパケットは、トランスポート層によって処理すべきアプリケーションに振り分けられる。

トランスポート層はアプリケーションの識別と要件に応じた転送制御を行うことで、ネットワークとアプリケーションを繋ぐ階層。トランスポート層ではポート番号という数字を利用してパケットを私アプリケーションを識別する。トランスポート層で使用されているプロトコルはUDP（User Diagram Protocol）かTCP（Transmission Control Protocol）のどちらかがある。アプリケーションが即時性を求めるときにはUDP、信頼性を求めるときはTCPを使用する。

５.1　UDP
UDPは音声通話や名前解決や時刻同期など即時性（リアルタイム性）を求めるアプリケーションで使用する。コネクションレス型プロトコルなので、いきなりUDPコネクションという論理的な通信路を作って、アプリケーションデータを送信する。またフォーマットをシンプルにしたり、確認応答の手順を省略したりすることによって、即時性の向上を図っている。つまり、UDPはパケットを送ったら送りっぱなしになる。

５.１.1　UDPのパケットフォーマット
UDPはIPヘッダーのプロトコル番号では17と定義されており、RFCの分量も非常に少なくあっさりしていてそのことからも’シンプルなプロトコルであることがわかる。UDPは即時性（リアルタイム性）に重きを置いているため、パケットフォーマットはシンプルそのもの。構成するヘッダーフィールドはたったの4つでヘッダーの長さも８バイトしかない。クライアントはUDPでデータグラムを作り、サーバーや相手のことなど関係なしに送信する。一方データを受信したサーバーはチェックサムをしてデータの整合性をチェックしていく。

送信元／宛先ポート番号
OSから割り当てられた値を「送信もとポート番号に」、アプリケーションごとに定義されている値を「宛先ポート番号」にセットして、サーバーに送信する。

UDPデータグラム長
ヘッダーとペイロードを合わせたデータグラム全体のサイズを表す。最小値はUDPヘッダーののみで構成された8、最大値はMTUからIPヘッダーの長さを引いた値。

チェックサム
チェックサムは受け取ったUDPデータグラムが壊れていないか生合成のチェックに使用される２バイトのフィールド。UDPのチェックサム検証にはIPヘッダーのチェックサムを同じ１の歩数演算が使用されている。データグラムを受け取った端末は検証に成功すると、データグラムを受け入れる。

５.１.2　ポート番号
トランスポート層のプロトコルにおいて最も重要なフィールドが送信元ポート番号と宛先ポート番号だ。UDPもTCPもポート番号ありきだ。ポート番号をアプリケーションは一位に紐づいていてポート番号さえみれば、どのアプリケーションにデータをわたあせばいいかわかるようになっている。ポート番号はアプリケーション層で動作するアプリケーションを識別する2ばいとの数字だ。０番から65535万まであってSystemPortsとUserPords、Dynamic and/or Private Portsの３種類に分類されている。

System Ports
ポート番号０〜1023まではSystemPortsになる。一般的にはウェルのウンポート（Well-known Ports）として知られている。

UserPorts
ポート番号1024〜49151まではUserPortsになる。SystemPortsと同じようにIANAに管理されている。
TCPの3306万だったらオラクル社のMySQLに紐づいている。3389だったらマイクロソフト社のリモートデスクチップのサーバーアプリケーションに紐づいている。

Dynamic and or Private Ports
ポート番号49612〜655135まではDynamic and or Private Ports。IANAによって管理されていなく、クライアントアプリケーションがコネクションを作るとき、送信元ポート番号としてランラムに割り当てられます。ランダムに割り当てられるポーt0番号の範囲はOSごとに割り当てが違う。送信もとポート番号はクライアント端末の中で一位でありさえすれば良いので、通信に問題が発生するわけではない。

５.１.3 ファイアウォールの動作（UDP編）
トランスポート層で動作する機能として、「ファイアーウォール」がある。ファイアウォールは送信もと／宛先IPアドレスやトランスポート層プロトコル、番号でコネクションを識別し、通信を制御する機器。あらかじめ設定したルールに従って、この通信は許可か拒否かを識別していろいろな脅威からシステムを守る。この通信制御システムをステートフルインスペクションという、ステートフルインスペクションは通信の許可、拒否を定義するフィルタリングルールとs通信をかっkりするコネクションテーブルを用いて通信を制御している。

フィルタリングルールとはどんな通信を許可し、どんな通信を拒否するかを定義している設定。

コネクションテーブル
ステートフルインスペクションを前述のフィルタリングルールをコネクションの情報を元に動的に書き換えることによって、セキュリティ強度を高めている。これをコネクションテーブルという。