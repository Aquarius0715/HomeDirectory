４.５.4
NATは以下の端末はプライベートIPアドレスしか持っていないため、インターネットを経由して直接通信することができない。
そこでNATにはNAT機器を超えて端末同士を直接通信させるためのNATトラバーサル（NAT超え）という技術がある。
NATトラバーサルは大きくポートフォワーディング、UPnP、STUN、TURNに分類することができる。

ポートフォワーディング
ポートフォワーディングは特定のIPアドレス／ポート番号に対する通信をあらかじめ設定しておいた内部の端末に転送する機能。内部（LAN）にいるサーバーを外部（インターネット）に公開するときなどに使用する。

UPnP
UPnP（Universal Plug and Play）は端末からのリクエストによって自動的にぽートフォワーディングできる機能のこと。

STUN
STUN（Session Traversal Utilities for NATs）はUDPを使用して外部（インターネット）から内部（LAN）に対するツウウィンを許可する機能。UDPホールパンチングとも呼ばれている。端末が内部（LAN）から外部（インターネット）にUDPパケットを送信すると、ほとんどのルータは応答パケットのために外部から内部に対する通信を一定時間許可する。その性質を応用する。まず、それぞれの端末はSTUNサーバーとUDPでやり取りして、自分と通信相手のグローバすIPv4アドレスとポート番号を認識する。また、併せてこのとき、ルータではそれぞれそのグローバすIPv4アドレスとポート番号に対する通信が一定時間許可される。それぞれの端末はそのグローバルIPv4アドレスとポート番号に対してアクセスすると、直接通信することができる。

TURN
TURN（Traversal Using Relay NAT）はTURNサーバを介した通信機能のこと。それぞれの端末はTURNサーバーにアクセスし、TURNサーバーを介してお互いにやり取りをする。直接通信ではないので、多少の通信遅延は発生するが、STUNよりも手軽。

４.7
IPを手助けしているプロトコルがICMP（Internet Control Message Protocol）がある。ICMPはIPレベルの通信を確認したり、いろいろなエラーを通知したりと、IPネットワークにおいて、なくてはならない非常に重要な役割を担っている。pingはICMPパケットを送信するときに使用するネットワーク診断プログラムになる。

４.７.1
ICMPはその名の通りインターネットを制御するメッセージをやりとりするプロトコルになる。ICMPはIPにおいて必要不可欠な部分であり、全てのIPモジュールに実装されていなければならないと記載されており、どのようなネットワーク機器でもIPv4とICMPv4は必ずセットで実装されていなければならない。
ICMPはIPv4にICMPメッセージを直接詰め込んだプロトコル番号1のIPv4パケットを返すだけなのでパケットフォーマットはシンプルになっている。

４.７.2
代表的なICMPv4の動作

Echo Request\Reply
IPレベルの通信状態を確認するときに使用されるICMPv4パケットがEcho RequestとEcho Replyだ。
	
Destination Unreachable
IPv4パケットを宛先IPv4アフォレスの端末までルーティングできなかったときに、エラーを通知するICMPv4パケットがDestination Unreachableだ。

Time -To-Live Exceeded
IPv4パケットのTTL（TimeTo Live）が０になって破棄したとき、それを送信元端末に対して通知するパケットがTimeToLiveExceededだ。
ルーティングの設定ミスによって、IPパケットが複数のルータを伝わってぐるぐる回る現象のことをルーティンググループという。